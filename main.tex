% !TEX program = xelatex
\documentclass[12pt,oneside]{report}

% -------- Packages --------
% للطباعة مع تجليد يسار مطابق للصورة (A4 + هامش تجليد 8mm)
\usepackage[a4paper,left=3cm,right=2.5cm,top=3cm,bottom=3cm,bindingoffset=8mm]{geometry}

\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}
\usepackage{caption}
\usepackage{float}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{fontspec}
\usepackage[hidelinks]{hyperref}
\usepackage{polyglossia}
\usepackage{ragged2e} % للضبط الكامل داخل الأعمدة

\setmainlanguage{english}
\setotherlanguage{arabic}

% Fonts
\setmainfont{Times New Roman}
\newfontfamily\arabicfont[Script=Arabic]{Times New Roman}
\newfontfamily\arialfont{Arial}

% ----- FIX: dummy definition for \tbl_save_outer_table_cols: to avoid bidi+tabularx error -----
\ExplSyntaxOn
\cs_if_exist:NF \tbl_save_outer_table_cols:
  {
    \cs_new_protected:Npn \tbl_save_outer_table_cols: {}
  }
\ExplSyntaxOff
% ----------------------------------------------------------------------- %

% Line spacing (default 1.5 as requested)
\onehalfspacing

% Section formatting (clean look)
\titleformat{\chapter}{\normalfont\Large\bfseries}{\thechapter}{1em}{}
\titleformat{\section}{\normalfont\large\bfseries}{\thesection}{0.8em}{}
\titleformat{\subsection}{\normalfont\normalsize\bfseries}{\thesubsection}{0.6em}{}

% TOC spacing a bit tighter
\setlength{\cftbeforechapskip}{6pt}
\setlength{\cftbeforesecskip}{2pt}

% Figure/Table captions (حجم أصغر وخط عريض لعنوان الكابتشن)
\captionsetup{font=small,labelfont=bf}

% ====== الإعداد المهم للجداول ======
% 1) إلغاء "Table X:" من الكابتشن داخل النص، وطباعة محتوى \caption كما هو
\captionsetup[table]{labelformat=empty,labelsep=none}
% الأشكال بدون "Figure X:"
\captionsetup[figure]{labelformat=empty,labelsep=none}
% 2) في قائمة الجداول (List of Tables): إخفاء رقم الجدول التلقائي
%    وترك نص الكابتشن كما هو (الذي يحتوي "Table 2.7.1 Login") مع نقاط وقائدات للصفحات
\renewcommand{\cfttabpresnum}{}   % لا تطبع الرقم قبل العنوان
\renewcommand{\cfttabaftersnum}{} % ولا أي فاصل بعده
\setlength{\cfttabnumwidth}{0pt}  % عدم حجز عرض لرقم الجدول
\renewcommand{\cfttableader}{\cftdotfill{\cftdotsep}} % تأكيد نقاط القيادة

% ---- Placeholders ----
\newcommand{\placeholderfigure}[1]{%
  \begin{figure}[H]
    \centering
    \fbox{\parbox[c][6cm][c]{0.9\textwidth}{\centering \textbf{PLACEHOLDER:} #1\\[6pt] \textit{Insert figure file here}}}
    \caption{#1}
  \end{figure}
}
\newcommand{\pastehere}[1]{\noindent\textcolor{gray}{\textit{[PASTE HERE: #1]}}\par}

% ---- Handy centered-column environments (جاهزة للصق) ----
\newenvironment{ENcentercol}[1][0.8\textwidth]{%
  \begin{center}\begin{minipage}{#1}\justifying
}{%
  \end{minipage}\end{center}
}
\newenvironment{ARcentercol}[1][0.8\textwidth]{%
  \begin{Arabic}\begin{center}\begin{minipage}{#1}\justifying
}{%
  \end{minipage}\end{center}\end{Arabic}
}
% --- Helper: render multiple paragraphs as one visual block (no extra spacing/indent) ---
\newenvironment{singlepara}{%
  \begingroup
  \setlength{\parindent}{0pt}%
  \setlength{\parskip}{0pt}%
}{\par\endgroup}

% --- Chapter title on its own page (numbered + in TOC) ---
\newcommand{\chaptertitlepage}[1]{%
  \clearpage
  \refstepcounter{chapter}% increase chapter counter
  \setcounter{section}{0}% reset section numbering like \chapter would
  \setcounter{subsection}{0}% reset subsection numbering
  \addcontentsline{toc}{chapter}{Chapter \thechapter: #1}% TOC entry
  \markboth{Chapter \thechapter: #1}{}
  \thispagestyle{empty}
  \vspace*{\fill}
  \begin{center}
    {\Huge\bfseries Chapter \thechapter: #1\par}
  \end{center}
  \vspace*{\fill}
  \clearpage
}


\begin{document}

% -------------------- Title Page --------------------
\begin{titlepage}
\thispagestyle{empty}
\centering

% --- University Logo placeholder (استبدله بـ \includegraphics) ---
\vspace*{6mm}
\includegraphics[width=0.37\textwidth]{ppu_logo.png}
\\[10mm]

{\Large \textbf{Palestine Polytechnic University}}\\[6pt]
{\large College of Information Technology and Computer Engineering}\\[18pt]

{\LARGE \textbf{Project Title:}}\\[6pt]
{\Large \textbf{Machine-Learning-Based Land-Price Prediction System}}\\[20pt]

{\large Team Members:}\\
{\large Mohammad Alqadi \quad|\quad Mohammad Alamlah}\\[8pt]

{\large Supervisor: Dr.~Hashem Altamimi}\\[28pt]

\vfill

\end{titlepage}

% -------------------- Front Matter --------------------
\pagenumbering{roman}

% ===== Dedication + Acknowledgement on SAME page (جاهزة للصق) =====
\begin{center}\Large\bfseries \textarabic{إهداء}\end{center}
\addcontentsline{toc}{chapter}{Dedication / \textarabic{إهداء}}
\begin{ARcentercol}
\textbf{إلى والدينا}\\
بفصاحة القلب وبكل احترام وتقدير، نتوجه إليكم برسالة ممتلئة بعمق المشاعر وارتفاع الجلال. إن ما نحمله في قلوبنا من امتنان ومودة لا يمكن وصفه بكلمات بسيطة، فأنتما الركيزة الثابتة التي بنينا عليها حياتنا، والشمعة الساطعة التي أضاءت دربنا في ظلمة الليالي..

\medskip
{\centering \large … \par}
\medskip

\textbf{إلى أصدقائنا}\\
بكل احترام وتقدير، نرفع لكم تحية الود والاعتزاز، فأنتم أصدقاؤنا الأوفياء والرفاق المخلصون. لقد كنتم دائماً العون والسند في السراء والضراء، والصخرة الصلبة التي نستند إليها في عبور مياه الحياة العميقة. فشكرًا لكم على كل لحظة قضيناها معًا، وعلى كل دعمكم اللامحدود وتضحياتكم الجليلة.

\medskip

\end{ARcentercol}

\vspace{2em}
\clearpage
\phantomsection

\begin{center}\Large\bfseries \textarabic{شكر وتقدير}\end{center}
\addcontentsline{toc}{chapter}{Acknowledgement / \textarabic{شكر وتقدير}}
\begin{ARcentercol}
إلى أساتذتنا الكرام، نتقدم بأخلص الشكر والتقدير على الجهود الجبارة التي بذلتموها خلال سنواتنا في الدراسة. لقد كنتم قدوةً ومصدرَ إلهامٍ لنا، وساهمتم بشكل كبير في تشكيل مستقبلنا الأكاديمي والمهني.

\medskip

نود أن نخصّ بالشكر \textbf{الدكتور هاشم هشام التميمي} على تفانيه وإرشاده القيم، وعلى كل العلم والمعرفة التي شاركنا بها. لقد كنتم داعمًا لنا في كل خطوة نخطوها في طريقنا التعليمي.

\medskip

نشكركم على صبركم الذي لا يُضاهى واحتوائكم لنا في كل الظروف، وعلى توفير بيئة تعليمية محفِّزة ومليئة بالتشجيع. إن مساهماتكم \textbf{لن تُنسى}، وستظل خالدة في ذاكرتنا.

\medskip

ونخصّ بالشكر \textbf{المخمّن العقاري قيس ادعيس} على تزويدنا ببيانات ميدانية واقعية وإرشادات مهنية أسهمت مباشرةً في بناء قاعدة البيانات واختبار النموذج.

\medskip

ونتوجه بالشكر أيضًا إلى \textbf{جامعة بوليتكنك فلسطين} على توفير المرافق التعليمية المتميزة والخدمات التي ساعدتنا على تحقيق أهدافنا الأكاديمية بنجاح.

\medskip

ندعو الله أن يجزيكم خير الجزاء وأن يوفقكم في كل ما تسعون إليه من خير وتطور في خدمة العلم والتعليم.
\end{ARcentercol}


% ===== End (same page) =====

% ===== English Abstract (centered title, own page) =====
\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{Abstract}
\begin{center}
  \Large\bfseries Abstract
\end{center}

\begin{ENcentercol}
{\arialfont\singlespacing\justifying
\begin{singlepara}
In the era of artificial intelligence and technological  advancements, the process of predicting ( or estimating ) land prices is still implemented using traditional methods that rely on human estimation, which makes it  prone to bias and inconsistency in results.
In response to these challenges, this project aims to develop an intelligent system that depends on machine learning and real-world data  to estimate land prices more objectively and more accurately, and in less time compared to traditional methods. The town of Bani Na'im, located in the Hebron Governorate in Palestine, was chosen as an experimental area to apply the system because there is enough available data about its lands, and local land appraisers cooperated by providing us with this data.

The system is designed with an interactive user interface that provides a form with fields to enter  land features such as area, location, political classification, and other influencing factors, to provide an immediate estimated price for the user.
The regression tree algorithm was chosen for the project in its early stage due to its simplicity and efficiency in dealing with a limited amount of data, which is the case with the data currently available.
The used data included both numerical and categorical features, the model was trained on this data to estimate  the price based on the entered factors.
The data was collected from various sources, the most important being the land appraisers from Bani Na'im as well as referring to official maps and structural plans to extract important information about the lands, such as their location, classification, shape, and price, so they can be manually entered into the system. The diverse sources helped build a realistic database,  and reinforced the authenticity of the model and its relevance to the practical field. Although the available data is limited, the model was optimized to achieve a balance between precision and speed, which makes it an effective helping tool for the decisions of real estate appraisers, since they are the main users who benefit from it.
This project represents the first step in automating the process of real estate valuation, and it is planned to develop it in the future using more advanced algorithms such as CatBoost and Random Forest, to keep up with the  increasing volume and variety of available data.
\end{singlepara}
}
\end{ENcentercol}

% ===== Arabic Abstract (centered title, own page) =====
\clearpage
\phantomsection
\addcontentsline{toc}{chapter}{\textarabic{الخلاصة}}
\begin{center}
  \Large\bfseries \textarabic{الخلاصة}
\end{center}

\begin{ARcentercol}
\singlespacing
في عصر نهضة الذكاء الاصطناعي والتطور الملحوظ لا تزال عملية تخمين (أو تثمين) أسعار الأراضي تُنفّذ بأساليب تقليدية تعتمد على التقدير البشري؛ فهذا يجعلها عرضة للتحيّز والتفاوت في النتائج.
استجابةً لهذه التحديات، يهدف هذا المشروع إلى تطوير نظام ذكي يعتمد على تعلم الآلة لتقدير أسعار الأراضي بموضوعية ودقة أعلى، وفي زمن أقل مقارنةً بالأساليب التقليدية، وذلك بالاعتماد على بيانات واقعية تم جمعها. وقد تم اختيار بلدة بني نعيم الواقعة في محافظة الخليل، فلسطين، كنموذج أولي لتطبيق النظام. نظراً لتوفر بيانات كافية حول أراضيها، وتعاون مخمني الأراضي من خلال تزويدنا بها.
تم تصميم النظام بواجهة مستخدم تفاعلية تتيح إدخال خصائص الأرض مثل المساحة، والموقع، والتصنيف السياسي، وغيرها من العوامل المؤثرة، ليحصل المستخدم على سعر تقديري فوري.
اعتمد المشروع في مرحلته الأولى خوارزمية شجرة الانحدار، نظرًا لبساطتها وقدرتها على التعامل بكفاءة مع أحجام بيانات محدودة، كما هو الحال مع البيانات المتوفرة حاليًا.
تضمنت البيانات المستخدمة خصائص عددية وأخرى تصنيفية وتم تدريب النموذج عليها لتقدير السعر بناءً على العوامل المدخلة.
وقد تم تحصيل هذه البيانات من مصادر متنوعة أهمها مخمنو الأراضي في بلدة بني نعيم، بجانب الرجوع إلى خرائط رسمية ومخططات هيكلية لاستخلاص معلومات تنظيمية عن الأراضي مثل موقعها وتصنيفها وشكلها، وسعرها، وذلك لإدخالها يدويًا إلى النظام. ساعد هذا التنوع في بناء قاعدة بيانات واقعية، وعزّز من موثوقية النموذج وارتباطه بالميدان العملي. ورغم محدودية البيانات المتوفرة، تم ضبط النموذج لتحقيق توازن فعّال بين الدقة وسرعة التنفيذ، مما يجعله أداة مساعدة فعالة لقرارات المخمّنين العقاريين، كونهم الفئة المستفيدة منه بشكل رئيسي.
يمثّل هذا المشروع الخطوة الأولى في أتمتة عملية التثمين العقاري، ويُخطط لتطويره لاحقًا باستخدام خوارزميات أكثر تقدمًا مثل CatBoost وRandom Forest، بما يتماشى مع الازدياد في حجم وتنوع البيانات المتوفرة.
\end{ARcentercol}



% ===== TOC / LOT / LOF each on its own page =====
\clearpage
\tableofcontents

\clearpage
{\renewcommand{\numberline}[1]{}\listoftables}

\clearpage
{\renewcommand{\numberline}[1]{}\listoffigures}


\clearpage
\pagenumbering{arabic}

% -------------------- Chapter 1 --------------------
\chaptertitlepage{Introduction}

\section{Overview}
This chapter introduces the main elements of the project. It begins with the idea of the project, then goes to its importance, followed by the goals of the project, the scope and limitations, the theoretical background, and finally the chosen algorithm and alternatives.

\section{Idea of the Project}
The main idea of the project is building a web application for an intelligent system that is capable of accurately predicting the land prices in the town of Bani Na'im.
In order for the system to predict accurately, it will depend on the techniques of artificial intelligence (AI) and machine learning (ML).
The machine learning model will be trained by providing for it all the major factors affecting land prices, these factors include: area, distance to main roads and markets, availability of water and electricity supplies, among others. By feeding the machine learning algorithm with this data the project aims to provide a faster, more accurate, and more transparent alternative to traditional land valuation methods.
The project intends to benefit the appraisers and help them make objective and data driven decisions.

\section{Importance}
Due to the frequent transactions in the area, the need for a faster and more efficient pricing method is growing, and one of the main advantages of this project's AI-powered approach is speed, while traditional/manual methods can take several hours to evaluate the price, the trained machine learning model can do it in seconds.
Another need is reducing subjectivity, it is crucial to avoid the human bias in the field of land price evaluation because human bias in land valuation can shift prices by thousands of shekels. The project eliminates such bias by relying on data and algorithms alone, ensuring objective, data-driven, and transparent predictions.

\section{Goals of the Project}
The main goal of the project is to develop a machine learning model capable of accurately estimating land prices in Bani Na’im and to achieve this goal, the project has the following objectives:

\begin{enumerate}[leftmargin=*, label=\arabic*-, align=left]
    \item Data collection: Gather all relevant land data like the area, location, suitability for agriculture and more.
    \item Data cleaning: After collecting the raw data, data cleaning is performed, where the data’s quality will be enhanced by removing duplicate and irrelevant data entries, and correcting inconsistencies.
    \item Model development: Train machine learning algorithms with the cleaned data and compare them to select the most suitable algorithm in predicting the prices.
    \item Model evaluation: Test the model and evaluate it by comparing the results of the model with the actual results of traditional pricing methods.
    \item Tool implementation: Design a user-friendly website as a tool for the land appraisers.
\end{enumerate}

The project aims to increase the efficiency and transparency of the land price estimations as well as making the process of price estimation easier for the appraisers.

\section{Scope and Limitations}
This project aims to predict land prices in the town of Bani Na'im using machine learning techniques depending on available real Bani Na'im land data.
The scope of the project includes developing a predictive machine learning model that predicts land prices depending on features like:

\begin{itemize}[leftmargin=*]
    \item Location
    \item Political classification of the land (area A, B, or C)
    \item Intended land use (e.g., residential, commercial)
    \item Land area
    \item Availability of infrastructure
    \item Proximity to essential public services (e.g., hospitals)
\end{itemize}

The project also involves designing a user-friendly interface that allows authorized users such as land appraisers, system admins, and data scientists to use the system — everyone as allowed to.

On the other hand, the project faces many challenges that may affect the accuracy of the prediction. The accuracy depends directly on data quality and completeness in addition to the used model. The most important limitations are:

\begin{itemize}[leftmargin=*]
    \item \textbf{Limited data availability:} The collected data may be outdated or incomplete, and some land prices may not be documented.
    \item \textbf{Assumption of data representativeness:} This project assumes that the available data reflects typical land characteristics in Bani Na’im.
    \item \textbf{Geographic limitation:} The model is specifically designed for lands just in Bani Na’im.
    \item \textbf{Not considering all external factors:} The model does not account for sudden market shifts, and in Palestine, Palestinians are vulnerable to forced displacement at any moment, which could cause a sudden gap in land prices.
    \item \textbf{Limited time:} Because of the limited time that we have, our team was not able to try many machine learning algorithms to choose the best one that validated our project.
\end{itemize}

\section{Background}
\subsection{Artificial Intelligence (AI)}
Artificial Intelligence (AI) is one of the most significant fields in modern computer science. It aims to develop intelligent systems capable of performing tasks that traditionally require human intelligence, such as reasoning, decision-making, pattern recognition, and prediction. AI systems rely on processing large datasets, extracting meaningful relationships, and generating insights that enable faster, more accurate, and more objective decisions compared to traditional manual approaches. In recent years, AI applications have expanded across numerous domains, including the real estate sector, where AI contributes to producing reliable, data-driven land and property price estimations.

\subsection{Machine Learning (ML)}
Machine Learning (ML) is a core discipline within AI that focuses on constructing models capable of learning automatically from data rather than being explicitly programmed for every possible case. ML models analyze historical data, discover patterns and relationships between input features and target variables, and utilize this knowledge to make predictions on new, unseen data.

Machine learning approaches are commonly categorized into three main types:
\begin{itemize}[leftmargin=*]
    \item \textbf{Supervised Learning:} The model is trained using labeled data that includes both input features and their corresponding correct outputs. This enables the model to learn the mapping between inputs and outputs.
    \item \textbf{Unsupervised Learning:} The model learns from unlabeled data, aiming to uncover hidden structures, clusters, or patterns within the dataset.
    \item \textbf{Reinforcement Learning:} The model learns by interacting with an environment, receiving feedback in the form of rewards or penalties, and improving its performance over time.
\end{itemize}

Since the objective of this project is to predict a continuous numerical value representing land price, the most suitable approach is supervised regression learning.

\subsection{Regression in Machine Learning}
Regression techniques are used when the target variable is continuous rather than categorical. In this project, regression is employed to estimate land prices based on multiple influential features, including:
\begin{itemize}[leftmargin=*]
    \item Geographic location
    \item Land area
    \item Administrative and political classification
    \item Availability of services and infrastructure
    \item Proximity to main roads and essential facilities
\end{itemize}

Using regression enables objective, consistent, and data-driven valuation while reducing reliance on subjective human estimation, which may vary among assessors.

\subsection{Regression Tree}
A Regression Tree is one of the widely used supervised learning algorithms for predicting continuous values such as real estate and land prices. A regression tree consists of internal nodes, branches, and terminal leaf nodes.

The dataset is recursively divided into increasingly homogeneous subsets by selecting the most informative feature and an appropriate splitting threshold at each node. This process continues until specific stopping criteria are satisfied, such as:
\begin{itemize}[leftmargin=*]
    \item Reaching a maximum tree depth
    \item Reaching a minimum number of samples in a node
    \item Achieving an acceptable prediction error
\end{itemize}

Ultimately, each leaf node represents a group of lands sharing similar characteristics, and a corresponding price estimation is assigned to that group.

\subsection{Overfitting and Pruning}
Regression trees may suffer from overfitting when the tree becomes too complex, learns noise from the training data, and performs poorly on new data. To address this limitation, pruning techniques are applied.

Pre-pruning restricts tree growth through constraints such as limiting maximum depth or requiring a minimum number of samples per node. Post-pruning builds a full tree and then removes branches that do not contribute significantly to prediction performance. These methods enhance the model’s generalization capability and improve the stability of predictions.

\subsection{Reasons for Choosing Decision Tree Regression}
The Regression Tree algorithm was selected for this project because it provides interpretable decision-making, supports both numerical and categorical data, performs effectively with small to medium-sized datasets, captures non-linear relationships, and matches the multi-factor nature of land price estimation. Therefore, it represents a scientifically justified and practically efficient choice for predicting land prices in Bani Na’im.
In addition, and  from a computational perspective, regression trees are efficient to train and evaluate, making them suitable for deployment within a web-based system. Their relatively low computational cost ensures fast response times during user interactions, which enhances system usability and scalability.

\section{Mathematical Background}
The Regression Tree model implemented in this project is mathematically supported by several fundamental principles governing node splitting, prediction generation, and model complexity control.

\subsection{Sum of Squared Residuals (SSR)}
At each node, the quality of the grouping is evaluated using the Sum of Squared Residuals (SSR), which measures how close the values are to their mean:
\[
SSR = \sum_{i=1}^{n}(y_i - \bar{y})^2
\]
where \(y_i\) is the actual price of sample \(i\), \(\bar{y}\) is the mean price of samples in the node, and \(n\) is the number of samples in the node.
A lower SSR indicates better homogeneity and therefore a better-quality node.

\subsection{Best Split Criterion}
For each potential split, SSR is computed for the left and right subsets. The total resulting error is:
\[
SSR_{total} = SSR_{left} + SSR_{right}
\]
The optimal split is the one that minimizes \(SSR_{total}\), ensuring that the resulting subsets are more homogeneous and stable.

\subsection{Leaf Node Prediction}
After the splitting process terminates, each leaf node represents a set of similar samples. The predicted value assigned to a leaf node is the mean value of all samples within it:
\[
\hat{y} = \frac{1}{n}\sum_{i=1}^{n} y_i
\]
Any new instance that reaches this leaf will be assigned this value as its predicted land price.

\subsection{Model Complexity Control (Cost Complexity Pruning)}
To avoid overfitting, a penalty term is introduced to balance accuracy and structural complexity:
\[
R_\alpha(T) = R(T) + \alpha |T|
\]
where \(R(T)\) is the prediction error of the tree, \(|T|\) is the number of terminal nodes, and \(\alpha\) is a regularization parameter controlling complexity.
Increasing \(\alpha\) reduces tree size and enhances generalization capability.

\section{Alternatives}
There are several alternative methods for evaluating the land prices, but the most common method used in Bani Na’im is \textbf{comparative market analysis (CMA)}, which is comparing the land to be evaluated to similar lands that were recently sold. These lands have shared attributes to be compared.

Although this method is commonly used, it is less accurate and less effective than the machine learning method, and also more complicated to justify the result because the CMA method relies heavily on the subjective judgment of experts rather than objective land statistics, which can introduce bias and inconsistency.


% -------------------- Chapter 2 --------------------
\chaptertitlepage{Requirement Specifications}

\section{Overview}
This chapter identifies the main users of the land pricing system and describes the role of each. 
It also outlines the functional and non-functional requirements that define how the system should behave, 
and shows how the components of the system interact with each other. 
It also presents visual representations such as a use-case diagram and a context diagram as well as functional requirements tables.


\section{Actors}
The system has three main actors, each with distinct responsibilities:

\begin{enumerate}[leftmargin=*, label=\arabic*-, align=left]
  \item \textbf{Land Appraiser} — Enters target-land characteristics and receives an automated price prediction. Uses the result to validate their own estimate or as a data-backed estimation.
  
  \item \textbf{Admin} — Manages user accounts and system configuration (view roles/emails, activate/deactivate, update or remove users). Maintains a safe, secure, and smooth operation of the platform.
  
  \item \textbf{Data Scientist} — Ensures model and platform quality. Prepares/creates datasets, tests and validates the ML model with real or synthetic data, monitors accuracy and performance, and suggests improvements.
\end{enumerate}

Together, these actors keep the system reliable and continuously improving.

% -------- Context Diagram (صفحة لوحدها + العنوان فوق الصورة) --------
\clearpage
\section{Context Diagram}

\noindent\justifying
Figure 2.3.1 illustrates the context diagram of the AI Land Price Estimation System, showing the main external entities and their interactions with the system. The key entities are the System Admin, Land Appraiser, Data Scientist, and Authentication/Email Service. Each entity communicates with the system through specific commands, data inputs, or reports, ensuring the overall functionality of user management, model development, account security, and land price estimation.

\begin{figure}[H]
  \centering
  \caption{Figure 2.3.1 Context Diagram}
  \vspace{6pt}
  \includegraphics[width=\textwidth,height=1\textheight,keepaspectratio]{images/Context diagram.png}
  \label{fig:context-diagram}
\end{figure}
\clearpage


\section{Functional Requirements}

\subsection{Land Appraiser's Side}
\begin{enumerate}[leftmargin=*,label=\arabic*.,align=left]
  \item \textbf{User Registration and Login}
  \begin{itemize}[leftmargin=1.2em]
    \item Appraisers must be able to register using a valid email address and password.
    \item An activation code provided by the administrator is required to complete registration.
    \item Once registered, appraisers can log in securely using their email and password.
    \item A password reset option must be available in case appraisers forget their password.
  \end{itemize}

  \item \textbf{Profile Management}
  \begin{itemize}[leftmargin=1.2em]
    \item View and edit personal information (e.g., name, email).
    \item Change password from profile settings.
  \end{itemize}

  \item \textbf{Add a New Project}
  \begin{itemize}[leftmargin=1.2em]
    \item Create a new project.
    \item Input land details for estimation.
  \end{itemize}

  \item \textbf{Selecting an Old Project}
  \begin{itemize}[leftmargin=1.2em]
    \item Select a previously created project.
    \item Edit the input data and re-estimate the price.
  \end{itemize}

  \item \textbf{Price Estimation}
  \begin{itemize}[leftmargin=1.2em]
    \item The system processes the entered data and displays the estimated land price.
    \item The appraiser receives a summary of the estimation and the influencing factors.
  \end{itemize}

  \item \textbf{Project History}
  \begin{itemize}[leftmargin=1.2em]
    \item The system saves each submitted land estimation as a separate project.
    \item The appraiser can view a list of all past projects.
    \item Each project shows input details, results, and the date of submission.
  \end{itemize}

  \item \textbf{Edit or Delete Land Inputs (Before Submission)}
  \begin{itemize}[leftmargin=1.2em]
    \item Edit or clear the form data before submitting for estimation.
  \end{itemize}

  \item \textbf{Input Validation}
  \begin{itemize}[leftmargin=1.2em]
    \item The system checks for missing or invalid entries and shows helpful error messages.
  \end{itemize}

  \item \textbf{Rating the Estimation Result}
  \begin{itemize}[leftmargin=1.2em]
    \item The appraiser can rate the estimation result after it is displayed.
  \end{itemize}
\end{enumerate}


\subsection{Admin's Side}
\begin{enumerate}[leftmargin=*,label=\arabic*.,align=left]
  

  \item \textbf{Manage Users}
  \begin{itemize}[leftmargin=1.2em]
    \item View all registered users.
    \item Remove user accounts.
    \item Edit user roles.
    \item Activate / Deactivate accounts.
  \end{itemize}

 

  \item \textbf{View System Logs} — See records of user activity and system events to monitor and diagnose issues.

  \item \textbf{Manage Backups} — Save backups of system data and restore them in case of data loss or system problems.
\end{enumerate}


\subsection{Data Scientist's Side}
\begin{enumerate}[leftmargin=*,label=\arabic*.,align=left]
 

  \item \textbf{Test Model Accuracy} — Run tests using known or sample land data to evaluate model accuracy.

  \item \textbf{Review Feature Impact} — View which land features (e.g., area, location) most influence the predicted price based on the model’s analysis.

  \item \textbf{Monitor Model Performance Over Time} — Track model performance across time and compare older versions with newer ones.

\end{enumerate}

% -------- Nonfunctional Requirements --------
\section{Nonfunctional Requirements}
The nonfunctional requirements describe how the system should behave to provide the best user experience.

\begin{enumerate}[leftmargin=*,label=\arabic*.,align=left]

  \item \textbf{Usability}
  \begin{itemize}[leftmargin=1.2em]
    \item The system should provide a simple and user-friendly interface.
    \item The interface should support both desktop and mobile browsers.
  \end{itemize}


  \item \textbf{Availability}
  \begin{itemize}[leftmargin=1.2em]
    \item The system should be available at least 99\% of the time.
  \end{itemize}

  \item \textbf{Security}
  \begin{itemize}[leftmargin=1.2em]
    \item The system must protect user information by applying strong encryption methods.
    \item Passwords should be securely hashed.
    \item Only authorized users can access their personal projects and information.
  \end{itemize}

  \item \textbf{Data Backup and Recovery}
  \begin{itemize}[leftmargin=1.2em]
    \item All user accounts and project details should be backed up regularly.
    \item When a system failure occurs, users should be able to recover their information without data loss.
  \end{itemize}

\end{enumerate}

% -------- Use-Case Diagram (صفحة لوحدها + العنوان فوق الصورة) --------
\clearpage
\section{Use-Case Diagram}
\begin{figure}[H]
  \centering
  \caption{Figure 2.5.1 Use Case Diagram}
  \vspace{6pt}
  \includegraphics[width=\textwidth,height=0.8\textheight,keepaspectratio]{images/use case diagram.png}
  \label{fig:use-case-diagram}
\end{figure}
\clearpage

\section{Appraiser’s Functional Requirements Tables}

% ---- Example Requirement Table Template (copy for other requirements) ----
\begin{table}[H]
\centering
\caption{Table 2.7.1 Login}
\label{tab:req-login}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Login \\ \hline

Actor & Land Appraiser \\ \hline

Objective & Access the appraiser’s account \\ \hline

Precondition & The appraiser must be registered. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item The appraiser enters email and password.
\item The appraiser clicks `Submit`.
\item The system verifies credentials and grants access.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Incorrect credentials — the system displays an error message.
\item Account locked due to failed attempts.
\item Account not activated.
\item No internet connection.
\item Server or network error — system prompts the user to try again later.
\end{enumerate}
%\end{minipage} 
\\ \hline
\end{tabularx}
\end{table}

% ---- Table 2.7.2 Register Account ----
\begin{table}[H]
\centering
\caption{Table 2.7.2 Register Account}
\label{tab:req-register}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Register Account \\ \hline

Actor & Land Appraiser \\ \hline

Objective & Create a new appraiser account. \\ \hline

Precondition & The appraiser must have the activation key from the administrator. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item The appraiser selects `Register`.
\item The appraiser enters the activation code.
\item The appraiser fills in required details (name, email, phone, password).
\item The appraiser submits the form.
\item The system creates the account and confirms registration.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Email already in use.
\item Weak or invalid password.
\item Required fields missing.
\item Activation code expired or incorrect.
\item Server or network error.
\end{enumerate}
\end{minipage} \\ \hline
\end{tabularx}
\end{table}

% ---- Table 2.7.3 Logout ----
\begin{table}[H]
\centering
\caption{Table 2.7.3 Logout}
\label{tab:req-logout}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Logout \\ \hline

Actor & Land Appraiser \\ \hline

Objective & Securely end the current session and prevent unauthorized access to the account. \\ \hline

Precondition & The appraiser is logged into the system. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item The appraiser clicks the Logout button from the system interface.
\item The system ends the current session.
\item The appraiser is sent to the login page.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Server or network error.
\end{enumerate}
\end{minipage} \\ \hline
\end{tabularx}
\end{table}



% ---- Table 2.7.4 Create Project ----
\begin{table}[H]
\centering
\caption{Table 2.7.4 Create Project}
\label{tab:req-create-project}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Add Project \\ \hline

Actor & Land Appraiser \\ \hline

Objective & Create a new project and enter information needed to estimate the land price. \\ \hline

Precondition & Appraiser must be logged in. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Appraiser selects ‘New Project’.
\item Fills in project and land details.
\item The system checks and validates the input data.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Missing or invalid fields — display helpful error messages.
\item Network failure.
\end{enumerate}
\end{minipage} \\ \hline
\end{tabularx}
\end{table}

% ---- Table 2.7.5 Estimate Price ----
\begin{table}[H]
\centering
\caption{Table 2.7.5 Estimate Price}
\label{tab:req-estimate-price}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Estimate Price \\ \hline

Actor & Land Appraiser \\ \hline

Objective & Predict and view the price of the land. \\ \hline

Precondition & Land data has been successfully submitted. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Appraiser clicks “estimate price”.
\item System runs the model on the input.
\item Displays the estimated price and summary.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item System error in model execution.
\item Server or network error.
\end{enumerate}
\end{minipage} \\ \hline
\end{tabularx}
\end{table}


\section{Admin’s Functional Requirements Tables}


% ---- Table 2.8.1 Manage Users ----
\begin{table}[H]
\centering
\caption{Table 2.8.1 Manage Users}
\label{tab:admin-manage-users}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & View Users \\ \hline

Actor & Admin \\ \hline

Objective & View a list of all registered users with their details, and the ability to select any user to edit their account. \\ \hline

Precondition & Admin is logged in. \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Admin opens the user management panel.
\item System displays a list of all registered users with basic details (e.g., name, email, registration date, role).
\item Admin can sort or filter the list.
\item Admin can select any user to make actions.
\item The actions are: Delete User, Deactivate Account (if activated), Activate Account (if deactivated), and Change Role.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Server error when retrieving user data.
\item Database connection failure.
\item Failure of action.
\end{enumerate}
\end{minipage} \\ \hline

\end{tabularx}
\end{table}


% ---- Table 2.8.2 Manage Backups ----
\begin{table}[H]
\centering
\caption{Table 2.8.2 Manage Backups}
\label{tab:admin-manage-backups}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Manage Backups \\ \hline

Actor & Admin \\ \hline

Objective & Ensure system and user data is regularly backed up. \\ \hline

Precondition & Backup system is active. \\ \hline

Scenario &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Admin opens ‘Backup Settings’.
\item Triggers manual backup or sets automatic schedule.
\item Confirms successful completion.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Backup failed due to storage limit.
\item Scheduled backup skipped due to server downtime.
\end{enumerate}
\end{minipage} \\ \hline

\end{tabularx}
\end{table}

% ---- Table 2.8.3 Create Activation Key ----
\begin{table}[H]
\centering
\caption{Table 2.8.3 Create Activation Key}
\label{tab:admin-create-key}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Create Activation Key \\ \hline

Actor & Admin \\ \hline

Objective & Generate a unique activation key for a data scientist or appraiser to use when registering their account. \\ \hline

Precondition & Admin is logged in. \\ \hline

Scenario &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Admin opens the "Activation Keys" panel.
\item Selects the account type (Data Scientist or Appraiser).
\item Clicks "Generate Key".
\item System generates a unique activation key.Clicks
\item Admin copies or sends the key Clicksto the intended recipient.
\end{enumerate}
\end{minipage} \\ \hline
Exceptions &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Server error during key generation.
\item Database access failure when saving the new key.

\end{enumerate}
\end{minipage} \\ \hline
\end{tabularx}
\end{table}


\section{Data Scientist’s Functional Requirements Tables}

% ---- Table 2.9.1 Test Model Accuracy ----
\begin{table}[H]
\centering
\caption{Table 2.9.1 Test Model Accuracy}
\label{tab:ds-test-model}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Test Model Accuracy \\ \hline

Actor & Data Scientist \\ \hline

Objective & Evaluate the prediction accuracy of the machine learning model. \\ \hline

Precondition & The system must have a trained model and a dataset available for testing. \\ \hline

Scenario &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item The data scientist selects the "Model Testing" section.
\item Uploads or selects a dataset for testing.
\item Runs the model to predict prices.
\item Compares predicted results with actual prices.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Incomplete or invalid test dataset.
\item Model not available or not trained.
\end{enumerate}
\end{minipage} \\ \hline

\end{tabularx}
\end{table}

% ---- Table 2.9.2 Review Feature Impact ----
\begin{table}[H]
\centering
\caption{Table 2.9.2 Review Feature Impact}
\label{tab:ds-feature-impact}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Review Feature Impact \\ \hline

Actor & Data Scientist \\ \hline

Objective & Analyze which features had the most influence on the land price prediction for a specific project. \\ \hline

Precondition & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item The model must be trained and support feature importance analysis.
\item The project must have completed the estimation.
\end{enumerate}
\end{minipage} \\ \hline

Scenario &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Access the “Projects” section.
\item Select a specific project from the list.
\item Open the “Feature Importance” view for that project.
\item View ranked list of features by their impact on the project’s prediction.
\item Export or download the report if needed.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions &
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Feature analysis tool is unavailable or unsupported for that project.
\item Insufficient project data to generate meaningful insights.
\item Selected project not found or inaccessible.
\end{enumerate}
\end{minipage} \\ \hline

\end{tabularx}
\end{table}


% ---- Table 2.9.3 Monitor Model Performance Over Time ----
\begin{table}[H]
\centering
\caption{Table 2.9.3 Monitor Model Performance Over Time}
\label{tab:ds-monitor-model}
\begin{tabularx}{\textwidth}{|p{3cm}|X|}
\hline
\textbf{Field} & \textbf{Content} \\ \hline

Requirement & Monitor Model Performance Over Time \\ \hline

Actor & Data Scientist \\ \hline

Objective & Track how the model performs across different versions and datasets, and test any selected version on demand. \\ \hline

Precondition & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item System must store model versions, related datasets, and performance logs.
\item At least one model version must exist.
\end{enumerate}
\end{minipage} \\ \hline

Scenario & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item Go to the “Model History” tab.
\item System displays a list of stored model versions with their details.
\item Select a version to see its past results.
\item Optionally, choose a dataset to re-test the selected model version.
\item System runs the test and shows the new results.
\end{enumerate}
\end{minipage} \\ \hline

Exceptions & 
\begin{minipage}[t]{0.75\textwidth}
\begin{enumerate}[leftmargin=*,label=\arabic*.]
\item No stored model versions available.
\item Past performance data is missing or incomplete.
\item Testing fails due to corrupted data or unsupported dataset format.
\item Network or server error during testing.
\end{enumerate}
\end{minipage} \\ \hline

\end{tabularx}
\end{table}


\section{Other less-related use cases}
\noindent\justifying
In addition to the functional requirements presented above, the system includes several additional use cases that are common across multiple user roles. These use cases—such as user login, logout, profile viewing, and profile editing—were omitted from the Admin and Data Scientist sections because they are already fully covered within the Normal User functional requirements and exhibit identical behavior across roles.

Furthermore, certain administrative functions, including user management and system log viewing, were excluded from the detailed tables as they are not central to the core objectives of the Land Price Estimator system.


% -------------------- Chapter 3 --------------------
\chaptertitlepage{Architecture and Design}

\section{Overview}
\noindent\justifying
This chapter explains how the Land Price Estimator system is organized and how its parts work together. It covers the system's design, the chosen architecture and its possible alternatives, the database structure, and the main interfaces for the user, administrator, and data scientist.


\section{Chosen Architecture Design}
\noindent\justifying
We studied multiple architecture design options, and concluded that the MVT (Model–View–Template) architecture is the best fit for our project.

\begin{table}[H]
\centering
\caption{Table 3.2.1 MVT Components}
\label{tab:mvt-components}
\setlength{\arrayrulewidth}{0.6pt}   % سماكة حدود الخلايا (اختياري)
\renewcommand{\arraystretch}{1.25}   % تهوية الصفوف (اختياري)
\begin{tabularx}{\textwidth}{|>{\raggedright\arraybackslash}p{3.2cm}|X|}
\hline
\textbf{Component} & \textbf{Role} \\ \hline
Model    & Manages data, database structure, and rules. \\ \hline
View     & Handles user actions; retrieves data from the model and selects the appropriate template to display results. \\ \hline
Template & Presentation layer controlling how data is rendered to the user (HTML). \\ \hline
\end{tabularx}
\end{table}


The separation makes it easy for developers to work on different components of the application at the same time without affecting each other's work, and makes future scalability as well as maintaining, debugging, and testing the application easier.

\noindent\textbf{Why MVT?} The MVT architecture is provided by Django, which is the framework we are using to develop the web application for the Land-Price Prediction system.


\section{Architecture Implementation}
In our Land-Price Prediction system, the MVT architecture is implemented as follows:

\begin{description}
    \item[Model:] Stores all the data related to each entity of the system, such as the lands and users attributes, and how they are stored in the database and how to retrieve them.
    
    \item[View:] The view stores the business logic and connects the models with the templates; it processes user requests, retrieves data from the model, and gives it to the template.
    
    \item[Template:] It's the interface that the user sees and interacts with. Through it, the user sees the results of the predictions and other information. The template has no business logic to ensure a clean separation from backend processing.
\end{description}

This structured method ensures that each layer is independent but still connected.

\begin{figure}[H]
  \captionsetup{position=top, labelformat=empty, labelsep=none}
  \centering
  \vspace{1cm}
   \caption{Figure 3.3.1 MVT Architecture}
  \includegraphics[width=\textwidth]{images/MVT.png}
  \label{fig:mvt}
\end{figure}



\subsection{Example Models in the System}

The project will have multiple models to manage the data effectively within the MVT architecture. Each model represents an entity of the Land-Price Prediction system and has its own attributes. Example models include:

\begin{enumerate}
    \item \textbf{User:} Represents a system user. Attributes include \texttt{id}, \texttt{full\_name}, \texttt{email}, \texttt{password}, \texttt{role}, and \texttt{created\_at}.
    
    \item \textbf{Project:} Represents a land estimation project. Attributes include \texttt{id}, \texttt{name}, \texttt{description}, \texttt{created\_by}, \texttt{created\_at}, and \texttt{status}.
    
    \item \textbf{Plot (Land Parcel):} Represents a land parcel. Attributes include \texttt{id}, \texttt{plot\_code}, \texttt{governorate\_id}, \texttt{town\_id}, \texttt{neighborhood\_id}, \texttt{area\_m2}, \texttt{slope}, \texttt{soil\_type\_id}, \texttt{rock\_type\_id}, \texttt{current\_land\_use}, \texttt{planned\_land\_use}, \texttt{far}, \texttt{coverage\_ratio}, \texttt{is\_current}, \texttt{version\_no}, \texttt{created\_by}, and \texttt{created\_at}.
    
    \item \textbf{Plot Document:} Represents documents related to a plot. Attributes include \texttt{id}, \texttt{plot\_id}, \texttt{doc\_type\_id}, \texttt{issuing\_authority\_id}, \texttt{doc\_number}, \texttt{issue\_date}, \texttt{share\_type}, and \texttt{share\_ratio}.
    
    \item \textbf{Model:} Represents a machine learning model. Attributes include \texttt{id}, \texttt{name}, \texttt{version}, \texttt{description}, \texttt{created\_by}, \texttt{created\_at}, and \texttt{is\_active}.
    
    \item \textbf{Valuation:} Represents the output of a model prediction for a plot in a project. Attributes include \texttt{id}, \texttt{project\_id}, \texttt{plot\_id}, \texttt{model\_id}, \texttt{predicted\_price}, \texttt{created\_at}, and \texttt{created\_by}.
    
    \item \textbf{Project Plot:} Represents the association between a project and its plots. Attributes include \texttt{id}, \texttt{project\_id}, \texttt{plot\_id}, \texttt{valuation\_id}, and \texttt{note}.
    
    \item \textbf{Plot Feedback:} Stores user feedback on a plot's estimated price. Attributes include \texttt{id}, \texttt{plot\_id}, \texttt{user\_id}, \texttt{is\_price\_accepted}, \texttt{suggested\_price}, and \texttt{created\_at}.
    
    \item \textbf{Governorate, Town, Neighborhood:} Represent geographical hierarchy. Attributes include \texttt{id}, \texttt{code}, \texttt{name\_ar}, and relevant foreign keys.
    
    \item \textbf{Supporting Lookup Tables:} Includes \texttt{Admin Zoning}, \texttt{Ownership Document Type}, \texttt{Issuing Authority}, \texttt{Soil Type}, \texttt{Rock Type}, \texttt{Crop Type}, \texttt{Nuisance Type}, and \texttt{Restriction Type} with their respective codes and labels.
    
    \item \textbf{Plot Crops, Plot Nuisances, Plot Restrictions:} Represent details of crops, nuisances, and restrictions on a plot. Attributes include plot foreign key, type foreign key, and specific measurements such as \texttt{coverage\_pct}, \texttt{tree\_count}, or \texttt{severity}.
\end{enumerate}

\clearpage
\section{ER Diagram}
\begin{figure}[H]
  \captionsetup{position=top,labelformat=empty,labelsep=none}
  \centering
  \caption{Figure 3.4.1 ER Diagram}
  \vspace{6pt}
  \includegraphics[width=0.7\textheight]{images/ER.png}
  \label{fig:erd}
\end{figure}
\clearpage

\section{Database Description}

\subsection{Users}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{full\_name}: string; not-null.
  \item \texttt{email}: string; unique; not-null.
  \item \texttt{password}: string; not-null; $\geq$ 8 chars.
  \item \texttt{role}: enum \{ADMIN, ASSESSOR, DATA\_SCIENTIST\}; not-null.
  \item \texttt{created\_at}: datetime; not-null.
\end{itemize}

\subsection{Projects}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: UUID; PK.
  \item \texttt{name}: string; not-null.
  \item \texttt{description}: string; not-null.
  \item \texttt{created\_by}: integer; FK $\rightarrow$ \texttt{users.id}; not-null.
  \item \texttt{created\_at}: datetime; not-null.
  \item \texttt{status}: enum \{ACTIVE, ARCHIVED\}; not-null.
\end{itemize}

\subsection{Plots (Land Parcels)}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: UUID; PK.
  \item \texttt{plot\_code}: string; unique; not-null.
  \item \texttt{governorate\_id}: integer; FK $\rightarrow$ \texttt{governorates.id}; not-null.
  \item \texttt{town\_id}: integer; FK $\rightarrow$ \texttt{towns.id}; not-null.
  \item \texttt{neighborhood\_id}: integer; FK $\rightarrow$ \texttt{neighborhoods.id}; not-null.
  \item \texttt{area\_m2}: \texttt{decimal(12,2)}; $\geq 0$; not-null.
  \item \texttt{slope}: enum \{FLAT, SLIGHT, MODERATE, STEEP\}; not-null.
  \item \texttt{soil\_type\_id}: integer; FK $\rightarrow$ \texttt{soil\_type.id}; nullable.
  \item \texttt{rock\_type\_id}: integer; FK $\rightarrow$ \texttt{rock\_type.id}; nullable.
  \item \texttt{current\_land\_use}: enum \{RES, COM, AGR, IND, MIX, VACANT\}; not-null.
  \item \texttt{planned\_land\_use}: enum \{RES, COM, AGR, IND, MIX, VACANT\}; nullable.
  \item \texttt{far}: \texttt{decimal(6,3)}; $\geq 0$; nullable.
  \item \texttt{coverage\_ratio}: \texttt{decimal(4,2)}; 0–1; nullable.
  \item \texttt{is\_current}: boolean; not-null.
  \item \texttt{version\_no}: integer; not-null.
  \item \texttt{created\_by}: integer; FK $\rightarrow$ \texttt{users.id}; not-null.
  \item \texttt{created\_at}: datetime; not-null.
\end{itemize}

\subsection{Plot\_Documents}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{plot\_id}: UUID; FK $\rightarrow$ \texttt{plots.id}; not-null.
  \item \texttt{doc\_type\_id}: integer; FK $\rightarrow$ \texttt{ownership\_document\_type.id}; not-null.
  \item \texttt{issuing\_authority\_id}: integer; FK $\rightarrow$ \texttt{issuing\_authority.id}; not-null.
  \item \texttt{doc\_number}: string; not-null.
  \item \texttt{issue\_date}: date; not-null.
  \item \texttt{share\_type}: enum \{INDIVIDUAL, MUSHA\}; not-null.
  \item \texttt{share\_ratio}: string (e.g., “3/8”); nullable if \texttt{INDIVIDUAL}.
\end{itemize}

\subsection{Models}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: UUID; PK.
  \item \texttt{name}: string; not-null.
  \item \texttt{version}: string; not-null.
  \item \texttt{description}: string; not-null.
  \item \texttt{created\_by}: integer; FK $\rightarrow$ \texttt{users.id}; not-null.
  \item \texttt{created\_at}: datetime; not-null.
  \item \texttt{is\_active}: boolean; not-null.
\end{itemize}

\subsection{Valuations}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: UUID; PK.
  \item \texttt{project\_id}: UUID; FK $\rightarrow$ \texttt{projects.id}; not-null.
  \item \texttt{plot\_id}: UUID; FK $\rightarrow$ \texttt{plots.id}; not-null.
  \item \texttt{model\_id}: UUID; FK $\rightarrow$ \texttt{models.id}; not-null.
  \item \texttt{predicted\_price}: \texttt{decimal(12,2)}; not-null.
  \item \texttt{created\_at}: datetime; not-null.
  \item \texttt{created\_by}: integer; FK $\rightarrow$ \texttt{users.id}; not-null.
\end{itemize}

\subsection{Project\_Plots}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{project\_id}: UUID; FK $\rightarrow$ \texttt{projects.id}; not-null.
  \item \texttt{plot\_id}: UUID; FK $\rightarrow$ \texttt{plots.id}; not-null.
  \item \texttt{valuation\_id}: UUID; FK $\rightarrow$ \texttt{valuations.id}; nullable.
  \item \texttt{note}: string; optional short label.
\end{itemize}


\subsection{Governorates}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{code}: string; unique; not-null.
  \item \texttt{name\_ar}: string; not-null.
\end{itemize}

\subsection{Towns}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{governorate\_id}: integer; FK $\rightarrow$ \texttt{governorates.id}; not-null.
  \item \texttt{code}: string; unique; not-null.
  \item \texttt{name\_ar}: string; not-null.
\end{itemize}

\subsection{Neighborhoods}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{town\_id}: integer; FK $\rightarrow$ \texttt{towns.id}; not-null.
  \item \texttt{code}: string; unique; not-null.
  \item \texttt{name\_ar}: string; not-null.
\end{itemize}

\subsection{Admin\_Zoning}
\begin{itemize}[leftmargin=*,itemsep=2pt]
  \item \texttt{id}: integer; PK; auto-increment.
  \item \texttt{code}: string; unique; not-null.
  \item \texttt{label\_ar}: string; not-null.
\end{itemize}


\section{Interfaces}
% --- UI Snapshots ---

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.1 Account Registration}
\includegraphics[width=0.7\textwidth]{images/Register.png} 
\label{fig:account-registration}
\end{figure}




\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.2 Create New Project}
\includegraphics[width=0.7\textwidth]{images/Create_new_project.png} 
\label{fig:Create_New_Project}
\end{figure}



% --- Placeholders ---



\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.3 Test Model Accuracy}
\includegraphics[width=0.7\textwidth]{images/Model_testing.png}
\end{figure}

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.4 Review Feature Impact}
\includegraphics[width=0.7\textwidth]{images/Feature_impact_2.png}
\end{figure}

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.5 Monitor Model Performance Over Time}
\includegraphics[width=0.7\textwidth]{images/Model_history.png}
\end{figure}



\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.6 View And Manage Users}
\includegraphics[width=0.7\textwidth]{images/User_management.png}
\end{figure}



\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 3.6.7 Manage Backups}
\includegraphics[width=0.7\textwidth]{images/Backup_management.png}
\end{figure}

% -------------------- Chapter 4 --------------------
\chaptertitlepage{System Implementation}

\section{Overview}
This chapter presents the implementation details of the Land Price Estimator system.
It describes the frontend and backend development, database technology,
system integration, and security mechanisms.

\section{Frontend Implementation}


\subsection{Frontend Interfaces Overview}

The frontend of the Land Price Estimator system provides a set of integrated user interfaces that allow users to authenticate, navigate the system, manage projects, and perform land price estimation tasks. These interfaces are designed to be clear, role-aware, and easy to use, ensuring smooth interaction between the user and the system’s core functionalities.

\textbf{Authentication Interfaces:}  
The system includes registration and login pages that control access to the platform. During registration, users are required to enter an activation code provided by the system administrator. This code determines the user role (such as appraiser, administrator, or data scientist) and ensures role-based access from the moment the account is created.  
The login interface allows registered users to authenticate using their email and password. Upon successful login, users are automatically redirected to their respective dashboard based on their assigned role, while authentication errors are clearly communicated.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.3.1 Registration Page}
\includegraphics[width=0.6\textwidth]{images/Figure 4.3.1 Registration page.png}
\label{fig:frontend-registration}
\end{figure}

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.3.2 Login Page}
\includegraphics[width=0.6\textwidth]{images/Figure 4.3.2 Login page.png}
\label{fig:frontend-login}
\end{figure}

\textbf{User Dashboard:}  
After authentication, users are redirected to a role-aware dashboard that serves as the main entry point to the system. The dashboard provides access to core features such as viewing existing projects, creating new land price estimation projects, and managing profile settings.
\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.3.3 Home Page}
\includegraphics[width=0.6\textwidth]{images/Figure 4.3.3 Homepage.png}
\label{fig:frontend-homepage}
\end{figure}

\textbf{Project Management Interface:}  
The project management interface allows users to view and manage all previously created land price estimation projects. Projects are displayed in an organized list showing key details such as project name, creation date, and current status. The interface supports searching, filtering, and sorting to help users efficiently locate specific projects. Each project entry provides direct access to its detailed view.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.3.4 Project Management Interface}
\includegraphics[width=0.6\textwidth]{images/Figure 4.3.4 Project Management Interface.png}
\label{fig:frontend-project-management}
\end{figure}

\textbf{New Project and Land Price Estimation Interface:}  
The new project interface enables users to create a land evaluation project by entering land-related, Server-side validation is applied to ensure data correctness before submission.  
Users can either save the project as a draft for later completion or submit the data for price estimation. When estimation is selected, the system processes the input data, performs price prediction, and stores the result along with the project details.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.3.5 New Project Form}
\includegraphics[width=0.6\textwidth]{images/Figure 4.3.5 New project form.png}
\label{fig:frontend-new-project-form}
\end{figure}

% =========================
% 4.4 Backend Implementation
% =========================

\section{Backend Implementation}

\subsection{Backend Architecture and Application Structure}

The backend of the Land Price Estimator system is implemented using the \textbf{Django} web framework and follows the \textbf{Model--View--Template (MVT)} architectural pattern. All core logic is handled on the server side, including user authentication, role-based access control, project management, and machine learning–based land price estimation.

The backend is responsible for managing users and permissions, handling project creation and storage, enforcing project ownership, integrating the trained machine learning model, and delivering validated data to frontend templates. All processing is performed internally within Django without relying on external API services.

The system follows a \textbf{modular multi-application structure}, where each Django application has a clear responsibility:
\begin{itemize}
  \item \textbf{Users\_Handling\_App}: Manages registration, login, activation codes, and role-based redirection.
  \item \textbf{normal\_user}: Implements the core system features used by land appraisers, including project management and price estimation.
  \item \textbf{data\_scientist and admin apps}: Reserved for future expansion; administrative tasks are currently handled through Django’s built-in admin panel.
\end{itemize}

This separation of concerns improves maintainability, scalability, and clarity of the backend design.

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.1 Normal User Application Structure}
  \includegraphics[width=0.3\linewidth]{images/Figure 4.4.2 Normal user side app structure.png}
\end{figure}


\subsection{Data Models and Database Design}

\textbf{Custom User Model}\\
A custom user model is implemented by extending Django’s \texttt{AbstractUser}, replacing the username with email-based authentication. Each user is assigned a role that determines system access.

Key features:
\begin{itemize}
  \item Email-based login
  \item Role-based user types (Land Appraiser, Data Scientist, Admin)
  \item Custom user manager for controlled user creation
\end{itemize}


\textbf{Project Model}\\
The Project model represents a land valuation request created by a land appraiser. Each project is associated with exactly one user, while each user may have multiple projects.

Key attributes include:
\begin{itemize}
  \item Governorate
  \item Land size
  \item Land type
  \item Political classification
  \item Project status (draft or completed)
  \item Creation date
\end{itemize}

\subsection{Forms and Server-Side Validation}

Django ModelForms are used to handle structured user input and enforce validation rules.

\begin{itemize}
  \item \textbf{UserForm}\\
  Used for profile updates, including secure password change with validation.

  \item \textbf{ProjectForm}\\
  Used to create new land valuation projects. The form maps directly to the Project model and ensures data consistency.
\end{itemize}

Server-side validation ensures:
\begin{itemize}
  \item Required fields are enforced
  \item Invalid data is rejected
  \item Security is maintained regardless of frontend behavior
\end{itemize}

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.2 Project form}
  \includegraphics[width=0.6\linewidth]{images/Figure 4.4.5 Project form.png}
\end{figure}

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.3 User form}
  \includegraphics[width=0.6\linewidth]{images/Figure 4.4.6 User form.png}
\end{figure}

\subsection{Project Creation and State Management}

When a user submits the project creation form, the backend distinguishes between two actions:
\begin{itemize}
  \item \textbf{Save as Draft}\\
  Stores the project without invoking the machine learning model.

  \item \textbf{Estimate Price}\\
  Triggers the ML prediction process and marks the project as completed.
\end{itemize}

This logic is handled within the Django view by detecting the submitted button name.

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.4newProject view}
  \includegraphics[width=0.6\linewidth]{images/Figure 4.4.7 newProject view.png}
\end{figure}

\subsection{Machine Learning Model Integration}

A Decision Tree Regression model was trained externally using Google Colab and exported using \texttt{joblib}. The trained model is loaded into Django and used for real-time inference.

ML Integration Workflow:
\begin{enumerate}
  \item Project data is validated and saved
  \item Relevant features are extracted
  \item Data is preprocessed to match training format
  \item The trained model predicts land price
  \item Prediction is stored in the database
  \item Project status is updated to completed
\end{enumerate}

The ML logic is isolated in a dedicated module to maintain separation between business logic and machine learning inference.

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.5Import the ML model}
  \includegraphics[width=0.6\linewidth]{images/Figure 4.4.8 Import the ML model.png}
\end{figure}

\begin{figure}[H]
  \centering
  \caption{Figure 4.4.6 Prediction function}
  \includegraphics[width=0.6\linewidth]{images/Figure 4.4.9 Prediction function.png}
\end{figure}


% ==================== 4.5 ====================
\section{Database Technology Implementation}

This section explains the database technology used in the Land Price Estimator system.
It describes the selected database engine, the data access methodology, core entities,
relationships, validation mechanisms, and schema management techniques.
\subsection{Database Engine and ORM Access}

The system uses \textbf{SQLite} as its database engine due to its lightweight, file-based design and seamless integration with the Django framework. SQLite does not require a separate database server, making it suitable for academic projects and prototype implementations.

Database operations are performed using the \textbf{Django Object-Relational Mapping (ORM)} layer, which allows interaction with the database through Python objects instead of raw SQL queries. Each database table is defined as a Django model, improving code readability, maintainability, and security by reducing risks such as SQL injection.


\subsection{Core Database Entities}
The database schema is centered around two main entities:

\textbf{Users} store authentication and role-related information for system participants,
including administrators, land appraisers, and data scientists.

\textbf{Projects} represent land valuation tasks created by users.
Each project is associated with its creator, ensuring ownership tracking
and controlled access to project data.

This structure supports clear separation of responsibilities
and organized storage of estimation records.

\subsection{Primary Keys and Relationships}
All tables use \textbf{BigAutoField} as their primary key,
which provides an auto-incremented integer identifier for each record.
This ensures uniqueness and efficient indexing.

Foreign keys are used to establish relationships between tables,
such as linking projects to users.
These relationships enforce \textbf{referential integrity},
ensuring that dependent records always reference valid parent records.

UUID values are not used as primary keys.
Instead, UUIDs are generated only for activation codes,
providing secure and unpredictable identifiers for account activation purposes.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.5.1 Primary and Foreign Key Relationships}
\includegraphics[width=0.6\textwidth]{images/Figure 4.5.2 Primary and Foreign Key Relationships.png}
\end{figure}

\subsection{Data Validation and Constraints}
Data integrity is ensured through multiple validation mechanisms at the model level.
These include enforcing correct data types,
restricting null values for essential fields,
and applying unique constraints on sensitive attributes such as email addresses.

Primary and foreign key constraints further guarantee the consistency of relational data.
\subsection{Database Migrations}
The database schema is managed using Django’s built-in migration framework.
Migrations allow controlled and incremental updates to the database structure
while preserving existing data.

Commands such as \texttt{makemigrations} and \texttt{migrate}
are used to synchronize model definitions with the SQLite database schema.


\subsection{Dataset Usage}
The model is trained using real land data collected for the project. Due to the limited size of the original dataset, the SMOTE technique was applied to increase the number of samples and improve data balance. This helps enhance model performance while preserving the characteristics of the original data.

Future work includes integrating real land data
through an official land registry API,
which would allow continuous updates
and enhance prediction accuracy and system realism.

% ==================== 4.6 ====================
\section{System Integration}

System integration ensures that all components of the Land Price Estimator system work together seamlessly. This includes the interaction between the frontend, backend, database, machine learning model, and email service.

\subsection{Integration with the Machine Learning Model}

The system integrates the Decision Tree Regression model for estimating land prices:

\begin{enumerate}[leftmargin=*]
    \item Upon selecting the “Estimate Price” action, the backend view prepares the input data from the form.
    \item The input data is sent to the predict\_land\_price() function, which uses the model\_loader to load the exported ML model.
    \item The model predicts the price and the result is stored in the Project model in the database.
\end{enumerate}

Error handling is implemented to manage cases where the ML model is missing or input data is invalid, ensuring users receive a user-friendly message instead of a system error.

\subsection{Role-Based Access Control Integration}

User roles are integrated to ensure security and appropriate access:

\begin{itemize}[leftmargin=*]
    \item Normal Users (Appraisers) can create projects, view their projects, and estimate land prices.
    \item Data Scientists (planned for future work) will access projects for analysis and model improvement.
    \item Administrators manage users, activation codes, and project oversight via the Django admin panel.
\end{itemize}

The backend enforces these restrictions using Django authentication, the User model, and role checks in views.


\subsection{Integration of Email Service}

The email service is integrated for password resets:

\begin{enumerate}[leftmargin=*]
    \item Users can request a password reset through the frontend.
    \item Django’s built-in password reset views handle the request and send an email using the configured SMTP backend.
    \item Users follow the link in the email to reset their password securely.
\end{enumerate}


\begin{figure}[H]
    \centering
    \caption{Figure 4.6.1 Email service integration in settings.py}
    \vspace{6pt}
    \includegraphics[width=0.6\textwidth]{images/Figure 4.6.3 Email service integration in settings.py.png}
\end{figure}

% ==================== 4.7 ====================
% ==================== 4.7 ====================
\section{Security Implementation}
This section describes the security mechanisms applied in the system to protect user data, prevent unauthorized access, and ensure safe interaction between system components. The implementation relies on Django’s built-in security features combined with application-level controls.

\subsection{Authentication and Access Control}
User authentication is handled using Django’s built-in authentication system. Only authenticated users can access protected views such as project creation, project listing, and land price estimation.
Access to system functionality is restricted based on user roles (e.g., normal user, administrator, data scientist). Each user can only access views and data relevant to their role, preventing unauthorized actions or data exposure.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.1 Authentication form}
\includegraphics[width=0.6\textwidth]{images/Figure 4.7.1 Authentication form.png}
\label{fig:security-auth-form}
\end{figure}

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.2 Authentication in loginPage view}
\includegraphics[width=0.6\textwidth]{images/Figure 4.7.2 Authentication in loginPage view.png}
\label{fig:security-auth-loginpage}
\end{figure}

\subsection{Authorization and Data Isolation}
To ensure data privacy, users are restricted to viewing and managing only their own projects. Database queries are filtered at the view level to return records associated exclusively with the currently authenticated user.
This approach prevents the user from attempting to access or manipulate another user’s data.
\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.3 User-based query filtering in viewProjects view}
\includegraphics[width=0.7\textwidth]{images/Figure 4.7.3 User-based query filtering in viewProjects view.png}
\label{fig:security-query-filtering}
\end{figure}

\subsection{Password Management and Account Recovery}
Passwords are securely stored using Django’s hashing framework. The system also supports password recovery through email-based password reset functionality, implemented using Django’s built-in password reset views.
This ensures that users can safely recover access to their accounts without exposing sensitive credentials.
In addition to password recovery via email, authenticated users are allowed to change their passwords from the profile editing interface.
\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.4 Change Password section in edit\_profile page}
\includegraphics[width=0.6\textwidth]{images/Figure 4.7.4 Change Password section in edit_profile page.png}
\label{fig:security-change-password}
\end{figure}

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.5 Reset password via email}
\includegraphics[width=0.6\textwidth]{images/Figure 4.7.5 Reset password via email.png}
\label{fig:security-reset-password-email}
\end{figure}

\subsection{Input Validation and Error Handling}

All user inputs are validated on the server side using Django Forms and ModelForms to ensure required fields, correct data formats, and business rules are enforced before storing data. This helps prevent invalid input and reduces the risk of common input-based attacks.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.6 ModelForm validation}
\includegraphics[width=0.6\textwidth]{images/Figure 4.7.6 ModelForm validation.png}
\label{fig:security-modelform-validation}
\end{figure}

The system also applies structured error handling to ensure safe failure. Runtime errors, such as machine learning prediction failures or missing resources, are handled gracefully and presented to users as clear, user-friendly messages without exposing internal system details.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 4.7.7 Exception handling during land price estimation}
\includegraphics[width=0.7\textwidth]{images/Figure 4.7.8 Exception handling during land price estimation.png}
\label{fig:security-exception-handling}
\end{figure}



% -------------------- Chapter 5 --------------------
\chaptertitlepage{Testing}

\section{Unit Testing}

Unit testing was conducted to verify the correctness of individual system components in isolation, particularly the data model responsible for storing land project information. Django’s built-in testing framework was used to ensure reliability, repeatability, and isolation from production data.

\subsection{Project Model Unit Test}

A unit test was implemented to validate the correct creation of a Project instance.

Figure 5.1.1 shows the unit test implementation within the tests.py file of the Normal\_User\_Side application. The test uses Django’s TestCase class, which automatically provides a temporary test database and a clean environment for each test run.

\begin{figure}[H]
    \centering
    \caption{Figure 5.1.1 Unit test implementation for the Project model}
    \vspace{6pt}
    \includegraphics[width=0.6\textwidth]{images/Figure 5.1.1 Unit test implementation for the Project model.png}
\end{figure}

The test setup creates a sample user and a project instance, then applies assertions to verify that:

\begin{itemize}[leftmargin=*]
    \item The project is correctly linked to the authenticated user
    \item The project fields contain the expected values
    \item The default project status is assigned correctly
\end{itemize}

This approach ensures that the core data model behaves as intended before being integrated with views, forms, or machine learning components.

\subsection{Test Execution and Results}

The unit test was executed using Django’s test runner. Figure 5.1.2 illustrates the successful execution output, where Django automatically creates a temporary test database, runs the test, and then destroys the database after completion.

\begin{figure}[H]
    \centering
    \caption{Figure 5.1.2 Unit test result}
    \vspace{6pt}
    \includegraphics[width=0.7\textwidth]{images/Figure 5.1.2 Unit test result.png}
\end{figure}

The successful test result confirms that the Project model functions correctly in isolation and that the system’s foundational data layer is stable.



\section{Integration Testing}

Integration testing ensures that different parts of the application work together correctly. For this project, the main focus was on the interaction between the project creation view, the ML model, and the database.

We created a simplified integration test in Normal\_User\_Side/tests.py that covers the following scenarios:

\begin{enumerate}[leftmargin=*]
    \item Creating a project as a draft.
    \item Creating a project and performing ML price estimation.
    \item Handling ML prediction failures gracefully.
    \item Ensuring that users can only see their own projects in the project list.
\end{enumerate}

\subsection{Test Code}

\begin{figure}[H]
    \centering
    \caption{Figure 5.2.1 Project Integration Test}
    \vspace{6pt}
    \includegraphics[width=0.7\textwidth]{images/Figure 5.2.1 Project Integration Test.png}
\end{figure}

\subsection{Explanation}

The test class ProjectIntegrationTest logs in a test user, submits project data to the new-project view, and checks the following:

\begin{itemize}[leftmargin=*]
    \item Whether the project is correctly saved as draft or completed.
    \item If the ML prediction is performed and the estimated price is saved.
    \item Whether errors in ML prediction are handled properly and do not break the flow.
    \item Whether the project list view only shows projects belonging to the logged-in user.
\end{itemize}

This ensures that the end-to-end workflow of project creation and listing works as intended.

\subsection{Test Results}

\begin{figure}[H]
    \centering
    \caption{Figure 5.2.2 Integration Test Result}
    \vspace{6pt}
    \includegraphics[width=0.6\textwidth]{images/Figure 5.2.2 Integration Test Result.png}
\end{figure}

\subsection{Explanation}

The results confirm that all integration scenarios are working:

\begin{itemize}[leftmargin=*]
    \item Draft projects are saved correctly.
    \item ML estimation is integrated successfully.
    \item Error handling works as expected.
    \item User-based project filtering is functional.
\end{itemize}
% ==================== 5.3 ====================
\section{End-to-End (E2E) Testing}
End-to-end testing evaluates the system as a complete unit by simulating real user interactions from initial access to final output. This testing approach ensures that all system layers—user interface, backend logic, authentication, database operations, and machine learning integration—work together seamlessly.
\subsection{User Registration and Authentication}
The testing process begins with the registration of a new normal user through the system’s registration interface.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 5.3.1 Registration}
\includegraphics[width=0.5\textwidth]{images/Figure 5.3.1 Registration.png}
\label{fig:e2e-registration}
\end{figure}

Explanation:
The user creates an account by providing required information and upon successful registration, the user will be redirected to the login page with a success message and will be able to authenticate using the login interface.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 5.3.2 Registration successful}
\includegraphics[width=0.5\textwidth]{images/Figure 5.3.2 Registration successful.png}
\label{fig:e2e-registration-success}
\end{figure}

\subsection{Dashboard Access and Navigation}
Once authenticated, the user gains access to the main dashboard.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 5.3.3 Dashboard}
\includegraphics[width=0.5\textwidth]{images/Figure 5.3.3 Dashboard.png}
\label{fig:e2e-dashboard}
\end{figure}

Explanation:
The dashboard serves as the central interface for project management, allowing the user to create new projects or view previously created ones.
\subsection{New Project Creation}
The user initiates the creation of a new land price estimation project by navigating to the “New Project” interface.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 5.3.4 New Project form filled with data}
\includegraphics[width=0.5\textwidth]{images/Figure 5.3.4 New Project form filled with data.png}
\label{fig:e2e-new-project-form}
\end{figure}

Explanation:
 The user fills in land-related attributes, These inputs represent the real-world data required for land price estimation, and after filling the form the user can either:
\begin{itemize}[leftmargin=*]
    \item Save as Draft: Stores the project without running the machine learning model.
    \item Estimate Price: Triggers the machine learning prediction process. 
\end{itemize}


\subsection{Project Viewing and Verification}
After submission, the user is redirected to the projects list page.

\begin{figure}[H]
\centering
\captionsetup{position=top}
\caption{Figure 5.3.5 View the created project in the list of projects}
\includegraphics[width=0.5\textwidth]{images/Figure 5.3.6 View the created project in the list of projects.png}
\label{fig:e2e-project-list}
\end{figure}

Explanation:
 The projects page displays all projects created by the authenticated user. This confirms correct database persistence, user-based data filtering, and real-time dashboard updates.


% -------------------- References --------------------
\chapter*{References}
\addcontentsline{toc}{chapter}{References}

\begin{enumerate}[label={[\arabic*]}]

\item J.~Starmer, ``Regression Trees, Clearly Explained!!!,'' \textit{StatQuest with Josh Starmer}, YouTube, 2020. [Online]. Available: \url{https://youtu.be/g9c66TUylZ4?si=0V35RgYavNRFB-yx}. Accessed: Jul.~3,~2025.

\item J.~Starmer, ``CatBoost Part 1: Ordered Target Encoding,'' \textit{StatQuest with Josh Starmer}, YouTube, 2023. [Online]. Available: \url{https://youtu.be/KXOTSkPL2X4?si=Iq890z0lxjhSlImH}. Accessed: Jul.~3,~2025.

\item J.~Starmer, ``CatBoost Part 2: Building and Using Trees,'' \textit{StatQuest with Josh Starmer}, YouTube, 2023. [Online]. Available: \url{https://youtu.be/3Bg2XRFOTzg?si=SUU2vVzNxbofFelA}. Accessed: Jul.~3,~2025.

\item Django Official Documentation: 
https://docs.djangoproject.com/en/stable/

\item Django Authentication System: 
https://docs.djangoproject.com/en/stable/topics/auth/

\item Django Forms:
https://docs.djangoproject.com/en/stable/topics/forms/

\item Django Models:
https://docs.djangoproject.com/en/6.0/topics/db/models/

\item Scikit-learn Decision Tree Regression: 
https://scikit-learn.org/stable/modules/tree.html

\item Pandas Documentation: 
https://pandas.pydata.org/docs/

\item Django Security Overview:
https://docs.djangoproject.com/en/stable/topics/security/

\item Brevo overview: 
https://developers.brevo.com/docs/getting-started

\item  Custom User Model and AUTH-USER-MODEL: 
https://docs.djangoproject.com/en/6.0/topics/auth/customizing/

\item SQLite schema alteration limitations: 
https://docs.djangoproject.com/en/stable/ref/databases/\#sqlite-notes

\end{enumerate}

\end{document}
